---
import PageLayout from '../layouts/PageLayout.astro';
import { getCDNUrl } from '../config/cdn';

// Import local images as URLs
import optionHero from '../images/home/home-option-1.avif?url';
import optionGrid from '../images/home/home-option-3.avif?url';
import mailHero from '../images/home/home-mail-1.avif?url';
import mailHeroMobile from '../images/home/home-mail-1-mobile.avif?url';
import mailGrid from '../images/home/home-mail-2.avif?url';
import destaireHero from '../images/home/home-destaire-1.avif?url';
import destaireGrid from '../images/home/home-destaire-3.png?url';

// Calculate date 2 weeks from today
const futureDate = new Date();
futureDate.setDate(futureDate.getDate() + 14);
const availableMonth = futureDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
---

<PageLayout title="AESSO — Independent web, brand and product design studio" description="We're a multidisciplinary design studio based in Paris, creating work that's as intuitive as it is beautiful. We specialize in web design, branding and apps.">
    <section class="hero">
      <div class="hero-content">
        <h1 class="hero-text">
          Multidisciplinary design partners, specializing in creative work that's as intuitive as it is beautiful.
        </h1>
        <div class="hero-info">
          <p>Available for new projects in {availableMonth}.<br>
          Follow us on <a href="https://instagram.com/aessostudio" target="_blank" rel="noopener">Instagram</a> and <a href="https://x.com/aessostudio" target="_blank" rel="noopener">X</a>.</p>
        </div>
      </div>
    </section>

    <section class="projects">
      <article class="project">
        <div class="project-images">
          <a href="/option-o" class="project-hero-image">
            <img
              src={optionHero}
              alt="Option O coffee grinder"
              width="1200"
              height="502"
              loading="lazy"
              decoding="async"
              fetchpriority="low"
            />
          </a>
          <div class="project-grid">
            <a href="/option-o" class="project-grid-link">
              <video
                src={getCDNUrl('home/home-option-2.mov')}
                autoplay
                loop
                muted
                playsinline
                preload="none"
                class="project-video"
              ></video>
            </a>
            <a href="/option-o" class="project-grid-link">
              <img
                src={optionGrid}
                alt="Option O detail"
                width="600"
                height="338"
                loading="lazy"
                decoding="async"
              />
            </a>
          </div>
        </div>
        <div class="project-content">
          <h2 class="project-title">Option O</h2>
          <div class="project-info">
            <p class="project-description">Web design explorations for Option O, the Melbourne-based engineering team designing and manufacturing premium coffee grinders. The layouts that we created are for an eCommerce website on Shopify, highlighting the release of their new flagship flat burr grinder, the Lagom 01.</p>
            <a href="/option-o" class="project-link">View project</a>
          </div>
        </div>
      </article>

      <article class="project">
        <div class="project-images">
          <a href="/mail" class="project-hero-image">
            <picture>
              <source media="(max-width: 768px)" srcset={mailHeroMobile} />
              <img
                src={mailHero}
                alt="Mail app design"
                width="1200"
                height="502"
                loading="lazy"
                decoding="async"
                fetchpriority="low"
              />
            </picture>
          </a>
          <div class="project-grid">
            <a href="/mail" class="project-grid-link">
              <img
                src={mailGrid}
                alt="Mail detail 1"
                width="600"
                height="338"
                loading="lazy"
                decoding="async"
              />
            </a>
            <a href="/mail" class="project-grid-link">
              <video
                src={getCDNUrl('home/home-mail-3.mov')}
                autoplay
                loop
                muted
                playsinline
                preload="none"
                class="project-video"
              ></video>
            </a>
          </div>
        </div>
        <div class="project-content">
          <h2 class="project-title">Mail app</h2>
          <div class="project-info">
            <p class="project-description">Product development and native app design for Mail, a soon-to-launch email client for iOS and macOS. Our vision is a refreshingly simple approach to email, where niche features and visual clutter are eliminated, leaving users with a streamlined and intuitive experience.</p>
            <a href="/mail" class="project-link">View project</a>
          </div>
        </div>
      </article>

      <article class="project">
        <div class="project-images">
          <a href="/destaire" class="project-hero-image">
            <img
              src={destaireHero}
              alt="Déstaire travel brand"
              width="1200"
              height="502"
              loading="lazy"
              decoding="async"
              fetchpriority="low"
            />
          </a>
          <div class="project-grid">
            <a href="/destaire" class="project-grid-link">
              <video
                src={getCDNUrl('home/home-destaire-2.mp4')}
                autoplay
                loop
                muted
                playsinline
                preload="none"
                class="project-video"
              ></video>
            </a>
            <a href="/destaire" class="project-grid-link">
              <img
                src={destaireGrid}
                alt="Déstaire detail"
                width="600"
                height="338"
                loading="lazy"
                decoding="async"
              />
            </a>
          </div>
        </div>
        <div class="project-content">
          <h2 class="project-title">Déstaire</h2>
          <div class="project-info">
            <p class="project-description">Branding, design and development work for Déstaire, a premium travel brand. With a focus on specialty hotels and city guides, they aim to deliver highly considered and curated travel recommendations for discerning travelers.</p>
            <a href="/destaire" class="project-link">View project</a>
          </div>
        </div>
      </article>
    </section>
</PageLayout>

<style>
  /* Mobile First Styles */
  .hero {
    margin-bottom: var(--spacing-lg);
  }

  .hero-content {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-sm);
    align-items: start;
  }

  .hero-text {
    font-size: var(--text-base-mobile);
    line-height: var(--leading-normal);
    font-weight: 400;
    max-width: 50rem;
  }

  .hero-info {
    font-size: var(--text-sm);
    line-height: var(--leading-tight);
    padding-top: 0;
  }

  .hero-info a {
    text-decoration: none;
  }

  .hero-info a:hover {
    opacity: 0.7;
  }

  /* Projects Section */
  .projects {
    margin-top: var(--spacing-lg);
    padding-bottom: var(--spacing-lg); /* Reduced from 2xl for mobile */
  }

  .project {
    margin-bottom: var(--spacing-xl);
  }

  .project:last-child {
    margin-bottom: 0;
  }

  .project-images {
    margin-bottom: var(--spacing-md);
  }

  .project-hero-image {
    margin-bottom: var(--spacing-sm);
    overflow: hidden;
    background: #f5f5f5;
    aspect-ratio: 16 / 9; /* Mobile aspect ratio */
    display: block;
  }

  .project-hero-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* Ensure clickable image links don't show underlines */
  a.project-hero-image,
  a.project-grid-link {
    text-decoration: none;
    display: block;
  }

  .project-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-sm);
  }

  .project-grid img {
    width: 100%;
    height: auto;
    aspect-ratio: 16 / 9;
    object-fit: cover;
    background: #f5f5f5;
    display: block;
  }

  .project-grid-link {
    background: #f5f5f5;
    aspect-ratio: 16 / 9;
    overflow: hidden;
  }

  .project-video {
    width: 100%;
    height: 100%;
    aspect-ratio: 16 / 9;
    object-fit: cover;
    object-position: center 25%;
    background: #f5f5f5;
    display: block;
  }

  .project-content {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-sm);
    align-items: start;
  }

  .project-title {
    font-size: var(--text-base-mobile);
    line-height: var(--leading-normal);
    font-weight: 400;
  }

  .project-info {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
    max-width: 32rem;
  }

  .project-description {
    font-size: var(--text-sm);
    line-height: var(--leading-tight);
    color: var(--color-text);
  }

  .project-link {
    font-size: var(--text-sm);
    line-height: var(--leading-tight);
    text-decoration: underline;
    color: var(--color-text);
    display: inline-block;
    margin: var(--spacing-xs) 0;
  }

  .project-link:hover {
    opacity: 0.7;
  }

  /* Small Tablet and up */
  @media (min-width: 480px) {
    .hero-text {
      font-size: var(--text-lg);
    }

    .project-title {
      font-size: var(--text-lg);
    }
  }

  /* Tablet and up */
  @media (min-width: 768px) {
    .hero-content {
      grid-template-columns: 2fr 1fr;
      gap: var(--spacing-lg);
    }

    .hero-text {
      font-size: var(--text-xl);
      padding-top: 0;
    }

    .hero-info {
      padding-top: 0.35rem; /* Align baseline with heading */
    }

    .projects {
      padding-bottom: 15rem;
    }

    .project {
      margin-bottom: 11rem;
    }

    .project-hero-image {
      aspect-ratio: 2.39 / 1; /* Anamorphic ratio for desktop */
    }

    .project-grid {
      grid-template-columns: 1fr 1fr;
    }

    .project-content {
      grid-template-columns: 1fr 1fr;
      gap: var(--spacing-sm);
    }

    .project-title {
      font-size: var(--text-xl);
    }
  }
</style>